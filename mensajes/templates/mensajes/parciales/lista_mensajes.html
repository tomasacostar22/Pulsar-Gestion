<!-- Header con tabs y boton enviar -->
<div class="flex items-center justify-between mb-6">
  <div class="flex gap-2">
    <a
      href="?vista=recibidos"
      hx-get="/mensajes/?vista=recibidos"
      hx-target="#contenido-mensajes"
      hx-push-url="true"
      class="px-4 py-2 rounded-lg text-sm font-medium transition {% if vista == 'recibidos' %}bg-indigo-600 text-white{% else %}bg-white text-indigo-600 border border-indigo-200 hover:bg-indigo-50{% endif %}"
    >
      Recibidos
    </a>
    <a
      href="?vista=enviados"
      hx-get="/mensajes/?vista=enviados"
      hx-target="#contenido-mensajes"
      hx-push-url="true"
      class="px-4 py-2 rounded-lg text-sm font-medium transition {% if vista == 'enviados' %}bg-indigo-600 text-white{% else %}bg-white text-indigo-600 border border-indigo-200 hover:bg-indigo-50{% endif %}"
    >
      Enviados
    </a>
  </div>
  <a
    href="{% url 'mensajes:enviar_mensaje' %}"
    class="bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-semibold px-4 py-2 rounded-lg transition"
  >
    + Nuevo mensaje
  </a>
</div>

<!-- Lista de mensajes -->
{% if mensajes %}
<div class="space-y-3">
  {% for mensaje in mensajes %}
  <div class="bg-white rounded-xl border border-indigo-100 shadow-sm p-5">
    <div class="flex items-center gap-3 mb-1">
      <h3 class="font-semibold text-indigo-900">{{ mensaje.titulo }}</h3>
    </div>
    <p class="text-sm text-indigo-500 mb-2">{{ mensaje.contenido }}</p>
    <div class="flex gap-4 text-xs text-indigo-400">
      {% if vista == "recibidos" %}
      <span>De: {{ mensaje.remitente.get_full_name }}</span>
      {% else %}
      <span>Para: {{ mensaje.destinatario.get_full_name }}</span>
      {% endif %}
      <span>{{ mensaje.fecha_envio|date:"d/m/Y H:i" }}</span>
    </div>
  </div>
  {% endfor %}
</div>
{% else %}
<div class="text-center py-16 text-indigo-300">
  <p class="text-lg">No hay mensajes por aqui.</p>
</div>
{% endif %}
